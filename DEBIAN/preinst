set -e
export NAME=xdr-api
export INSTALL_DIR=/usr/bin/xdr-api

case $1 in

install)
	echo "inside install"
	mkdir -p $INSTALL_DIR
	
	if ! getent group "$NAME" >/dev/null 2>&1; then
	    echo -n "Creating ${NAME} group"
	    addgroup --quiet --system "${NAME}"
	    echo "Group Created"
	fi
	
	# create xdr-api user if doesn't exits
	if ! id "$NAME" >/dev/null 2>&1; then
	    echo -n "Creating ${NAME} user"
	    adduser -n --quiet \
	            --system \
        	    --no-create-home \
	            --home /nonexistent \
        	    --ingroup "${NAME}" \
	            --disabled-password \
        	    --shell /bin/false \
	            "${NAME}"	
	    echo "User Created"
	fi
	;;
upgrade)
	echo "inside upgrade"
esac
exit 0
